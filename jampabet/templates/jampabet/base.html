{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>{% block title %}JampaBet{% endblock %} - Palpites do Bahia</title>
    <link rel="icon" type="image/x-icon" href="{% static 'jampabet/images/favicon.ico' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'jampabet/images/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'jampabet/images/favicon-16x16.png' %}">
    <link rel="apple-touch-icon" sizes="64x64" href="{% static 'jampabet/images/favicon-64x64.png' %}">
    <link rel="stylesheet" href="{% static 'jampabet/css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% block splash %}
    <!-- Splash Screen - aparece em todo refresh -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <div class="logo-container">
                <div class="logo-icon">
                    <i class="fas fa-futbol"></i>
                </div>
                <h1 class="logo-text">JAMPA<span>BET</span></h1>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="splash-tagline">Bora Bahea Minha Porra!</p>
        </div>
    </div>
    {% endblock %}

    <div id="app" class="app {% block app_class %}hidden{% endblock %}">
        {% block header %}
        <header class="header">
            <div class="header-content">
                <a href="{% url 'jampabet:home' %}" class="logo">
                    <i class="fas fa-futbol logo-ball"></i>
                    <span class="logo-name">JAMPA<span class="highlight">BET</span></span>
                </a>
                {% if request.jampabet_user %}
                <button type="button" class="user-info" id="open-user-menu">
                    <div class="user-avatar">
                        <span>{{ request.jampabet_user.name|slice:":1"|upper }}</span>
                    </div>
                    <div class="user-details">
                        <span class="user-name">{{ request.jampabet_user.name }}</span>
                        <span class="user-points">{{ request.jampabet_user.points }} pts</span>
                    </div>
                </button>
                {% else %}
                <a href="{% url 'jampabet:login' %}" class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name">Entrar</span>
                    </div>
                </a>
                {% endif %}
            </div>
        </header>
        {% endblock %}

        <main class="main-content">
            {% block content %}{% endblock %}
        </main>

        {% block footer %}
        <footer class="footer">
            <div class="footer-content">
                <p>JAMPA<span class="highlight">BET</span> &copy; 2025 - Apostas entre amigos</p>
                <p class="footer-disclaimer">Esporte Clube Bahia - Apenas para diversao. Sem apostas reais.</p>
            </div>
        </footer>
        {% endblock %}

        {% block bottom_nav %}
        <nav class="bottom-nav">
            <button class="bottom-nav-btn {% if active_tab == 'palpites' %}active{% endif %}" data-tab="palpites">
                <i class="fas fa-ticket-alt"></i>
                <span>Palpites</span>
            </button>
            <button class="bottom-nav-btn {% if active_tab == 'ranking' %}active{% endif %}" data-tab="ranking">
                <i class="fas fa-medal"></i>
                <span>Ranking</span>
            </button>
            <button class="bottom-nav-btn {% if active_tab == 'classificacao' %}active{% endif %}" data-tab="classificacao">
                <i class="fas fa-table"></i>
                <span>Tabela</span>
            </button>
        </nav>
        {% endblock %}
    </div>

    {% block modals %}{% endblock %}

    <!-- Script de Splash Screen -->
    <script>
    (function() {
        'use strict';
        const SPLASH_DURATION = 2000; // 2 segundos
        const splashScreen = document.getElementById('splash-screen');
        const app = document.getElementById('app');

        if (splashScreen && app) {
            setTimeout(function() {
                splashScreen.classList.add('fade-out');
                app.classList.remove('hidden');
            }, SPLASH_DURATION);
        }
    })();
    </script>

    <script src="{% static 'jampabet/js/app.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
